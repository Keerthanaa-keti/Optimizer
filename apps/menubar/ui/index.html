<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CreditForge</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <div class="header">
      <span class="header-title">CreditForge</span>
      <button class="header-btn" id="quit-btn" title="Quit">&times;</button>
    </div>

    <!-- Subscription Hero -->
    <div class="sub-hero">
      <div class="sub-hero-row">
        <span class="sub-hero-label">Your Plan</span>
        <span class="sub-hero-amount" id="sub-plan-monthly">$100/month</span>
      </div>
      <div class="sub-hero-row">
        <span class="sub-hero-label">This week's budget</span>
        <span class="sub-hero-weekly" id="sub-plan-weekly">$23.08</span>
      </div>
    </div>
    <div class="divider"></div>

    <!-- This Week Card -->
    <div class="sub-card">
      <div class="sub-card-header">
        <span class="sub-card-title">This Week</span>
        <span class="sub-card-meta" id="sub-weekly-msgs">0 msgs</span>
      </div>
      <div class="progress-wrap">
        <div class="progress-bar">
          <div class="progress-fill" id="sub-weekly-fill" style="width: 0%"></div>
        </div>
        <span class="progress-pct" id="sub-weekly-pct">0%</span>
      </div>
      <div class="sub-card-dollars">
        <span id="sub-weekly-used">$0 used</span>
        <span id="sub-weekly-remaining">$0 left</span>
      </div>
      <div class="sub-card-reset" id="sub-weekly-reset">Resets Sat 2:30 PM</div>
    </div>
    <div class="divider"></div>

    <!-- Current Session Card -->
    <div class="sub-card">
      <div class="sub-card-header">
        <span class="sub-card-title">Current Session</span>
        <span class="sub-card-meta" id="sub-session-meta">5h window</span>
      </div>
      <div class="progress-wrap">
        <div class="progress-bar">
          <div class="progress-fill" id="sub-session-fill" style="width: 0%"></div>
        </div>
        <span class="progress-pct" id="sub-session-pct">0%</span>
      </div>
      <div class="sub-card-dollars">
        <span id="sub-session-spent">$0 spent this session</span>
        <span id="sub-session-msgs">0 msgs</span>
      </div>
      <div class="sub-card-reset" id="sub-session-reset">Resets in 5h 0min</div>
    </div>
    <div class="divider"></div>

    <!-- Subscription Value Card -->
    <div class="sub-value-card" id="sub-value-card">
      <div class="sub-value-title">Subscription Value</div>
      <div class="sub-value-pct" id="sub-util-pct">0% utilized this week</div>
      <div class="sub-value-waste" id="sub-waste" style="display: none"></div>
    </div>
    <div class="divider"></div>

    <!-- Morning Report Banner -->
    <div id="morning-report-banner" class="nm-report-banner" style="display: none">
      <span id="nm-report-summary" class="nm-report-summary">Night run: 0 done, 0 failed</span>
      <button class="btn-view-report" id="btn-view-report">View Report</button>
    </div>

    <!-- Night Mode Section -->
    <div class="section-title">Night Mode</div>
    <div class="divider"></div>
    <div id="nightmode-section" class="nightmode-section">
      <!-- Setup banner (shown when launchd not installed) -->
      <div id="nm-setup" class="nm-setup" style="display: none">
        <div class="nm-setup-text">Night Mode agents not installed</div>
        <button class="btn-action" id="btn-install-launchd">Install Night Mode</button>
      </div>

      <!-- Status rows (always shown) -->
      <div class="nm-row">
        <span class="nm-label">Status</span>
        <label class="nm-toggle" id="nm-toggle">
          <input type="checkbox" id="nm-toggle-input">
          <span class="nm-toggle-slider"></span>
          <span class="nm-toggle-label" id="nm-toggle-label">Disabled</span>
        </label>
      </div>
      <div class="nm-row">
        <span class="nm-label">Next run</span>
        <span class="nm-value" id="nm-next-run">--</span>
      </div>
      <div class="nm-row">
        <span class="nm-label">Queued tasks</span>
        <span class="nm-value nm-highlight" id="nm-queued">0</span>
      </div>
      <div class="nm-row">
        <span class="nm-label">Night budget</span>
        <span class="nm-value" id="nm-sub-budget">--</span>
      </div>
      <div class="nm-row">
        <span class="nm-label">Window</span>
        <span class="nm-value" id="nm-window">--</span>
      </div>
      <div class="nm-row">
        <span class="nm-label">Today</span>
        <span class="nm-value" id="nm-today">--</span>
      </div>

      <!-- Action bar (shown when launchd installed) -->
      <div id="nm-actions" class="nm-actions" style="display: none">
        <button class="btn-action btn-sm" id="btn-scan">Scan</button>
        <button class="btn-action btn-sm" id="btn-dry-run">Preview Plan</button>
      </div>

      <!-- Exclude paths settings -->
      <div class="nm-exclude-section" id="nm-exclude-section">
        <div class="nm-exclude-header">
          <span class="nm-exclude-title">Excluded Paths</span>
          <button class="nm-exclude-add" id="nm-exclude-add" title="Add path">+</button>
        </div>
        <div id="nm-exclude-list" class="nm-exclude-list"></div>
      </div>

      <div id="nm-top-tasks" class="nm-tasks" style="display: none">
        <div class="nm-tasks-header">
          <div class="nm-tasks-title">Top queued tasks</div>
          <button class="nm-view-all" id="nm-view-all" style="display: none">View All (<span id="nm-view-all-count">0</span>)</button>
        </div>
        <div id="nm-task-list"></div>
      </div>

      <!-- Results panel (shown after scan or preview) -->
      <div id="nm-results" class="nm-results" style="display: none">
        <div class="nm-results-header">
          <span class="nm-results-title" id="nm-results-title"></span>
          <button class="nm-results-close" id="nm-results-close">&times;</button>
        </div>
        <div class="nm-results-body" id="nm-results-body"></div>
      </div>
    </div>
    <div class="divider"></div>


    <!-- Footer -->
    <div class="footer">
      <div class="footer-actions">
        <button class="btn" id="dashboard-btn">Open Dashboard</button>
        <button class="btn btn-secondary" id="refresh-btn">Refresh</button>
      </div>
      <div class="footer-tier" id="tier-label"></div>
    </div>

    <!-- Toast notifications -->
    <div id="toast-container" class="toast-container"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
